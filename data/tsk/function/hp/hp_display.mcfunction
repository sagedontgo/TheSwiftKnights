tag @s add tsk.displayHp
execute unless entity @e[sort=nearest,limit=1,type=text_display,distance=..3,tag=tsk.hpIndicator] run summon text_display ~ ~ ~ {transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[0f,0f,0f],scale:[1f,1f,1f]},billboard:"center",alignment:"center",Motion:[0.1,0.03,0.05],text:'[{"text":"Lv. ","color":"green"},{"score":{"name":"@n[tag=tsk.displayHp]","objective":"tsk.mobLevel"},"extra":[{"text":" "}]},{"selector":"@n[tag=tsk.displayHp]","color":"white"},{"text":" "},{"score":{"name":"@n[tag=tsk.displayHp]","objective":"tsk.hp"},"color":"red"},{"text":"❤","color":"red"}]',Tags:["tsk.hpIndicator"]}
execute if score @s tsk.healthDisplayTimer matches 1.. run data merge entity @e[sort=nearest,limit=1,type=text_display,tag=tsk.hpIndicator] {transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[0f,0f,0f],scale:[1f,1f,1f]},billboard:"center",alignment:"center",Motion:[0.1,0.03,0.05],text:'[{"text":"Lv. ","color":"green"},{"score":{"name":"@n[tag=tsk.displayHp]","objective":"tsk.mobLevel"},"extra":[{"text":" "}]},{"selector":"@n[tag=tsk.displayHp]","color":"white"},{"text":" "},{"score":{"name":"@n[tag=tsk.displayHp]","objective":"tsk.hp"},"color":"red"},{"text":"❤","color":"red"}]',Tags:["tsk.hpIndicator"]}
execute as @e[sort=nearest,limit=1,type=text_display,tag=tsk.hpIndicator] run ride @s mount @n[sort=nearest,limit=1,type=#tsk:all,distance=..1]

execute if entity @p[tag=!tsk.rolledCrit] run summon text_display ~1 ~1 ~ {transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[0f,0f,0f],scale:[1f,1f,1f]},billboard:"center",alignment:"center",Motion:[0.1,0.03,0.05],text:'[{"color":"red","text":"-"},{"color":"red","score":{"name":"@p","objective":"tsk.damageDealt"}}]',Tags:["tsk.dmgIndicator"]}
execute if entity @p[tag=tsk.rolledCrit,scores={tsk.hitCount=1}] run summon text_display ~1 ~1 ~ {transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[0f,0f,0f],scale:[1f,1f,1f]},billboard:"center",alignment:"center",Motion:[0.1,0.03,0.05],text:'[{"color":"red","text":"-"},{"color":"red","score":{"name":"@p","objective":"tsk.damageDealt"}}]',Tags:["tsk.dmgIndicator"]}
execute if entity @p[tag=tsk.rolledCrit,scores={tsk.hitCount=2..}] run summon text_display ~1 ~1 ~ {transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[0f,0f,0f],scale:[1f,1f,1f]},billboard:"center",alignment:"center",Motion:[0.1,0.03,0.05],text:'[{"color":"gold","text":"✨"},{"color":"gold","score":{"name":"@p","objective":"tsk.damageDealt"}}]',Tags:["tsk.dmgIndicator"]}

scoreboard players set @s tsk.healthDisplayTimer 60
scoreboard players set @e[type=text_display,sort=nearest,limit=1,tag=tsk.hpIndicator] tsk.indicatorTimer 30
scoreboard players set @e[type=text_display,sort=nearest,limit=1,tag=tsk.dmgIndicator] tsk.indicatorTimer 20

